# Test: FastNumber Type - Fast f64 for Performance-Critical Code
# Demonstrates explicit fast floating-point arithmetic

Story:
    Print "=== FastNumber Tests ==="
    Print ""

    # Test 1: Creating FastNumber from Number
    Print "Test 1: Creating FastNumber from Number"
    Print "----------------------------------------"

    RegularNum is 100.5
    FastNum is FastNumber(RegularNum)

    Print "Regular Number: " + RegularNum
    Print "FastNumber: " + FastNum
    Print "✓ Created FastNumber from Number"
    Print ""

    # Test 2: Creating FastNumber from string
    Print "Test 2: Creating FastNumber from String"
    Print "----------------------------------------"

    FastFromStr is FastNumber("3.14159")
    Print "FastNumber from string: " + FastFromStr
    Print "✓ Parsed string to FastNumber"
    Print ""

    # Test 3: FastNumber arithmetic
    Print "Test 3: FastNumber Arithmetic"
    Print "----------------------------------------"

    A is FastNumber(10.5)
    B is FastNumber(2.5)

    Sum is A + B
    Diff is A - B
    Prod is A * B
    Quot is A / B
    Mod is A % B

    Print "A = " + A
    Print "B = " + B
    Print "A + B = " + Sum
    Print "A - B = " + Diff
    Print "A * B = " + Prod
    Print "A / B = " + Quot
    Print "A % B = " + Mod
    Print "✓ FastNumber arithmetic works"
    Print ""

    # Test 4: Mixed arithmetic (FastNumber + Number)
    Print "Test 4: Mixed Arithmetic (FastNumber + Number)"
    Print "----------------------------------------"

    Fast is FastNumber(50.0)
    Slow is 25.5

    Mixed1 is Fast + Slow
    Mixed2 is Slow + Fast
    Mixed3 is Fast * Slow

    Print "FastNumber(50.0) + Number(25.5) = " + Mixed1
    Print "Number(25.5) + FastNumber(50.0) = " + Mixed2
    Print "FastNumber(50.0) * Number(25.5) = " + Mixed3
    Print "✓ Mixed operations convert to FastNumber"
    Print ""

    # Test 5: Comparison operations
    Print "Test 5: Comparison Operations"
    Print "----------------------------------------"

    X is FastNumber(10.0)
    Y is FastNumber(20.0)
    Z is FastNumber(10.0)

    If X < Y:
        Print "✓ X < Y (10.0 < 20.0)"

    If Y > X:
        Print "✓ Y > X (20.0 > 10.0)"

    If X = Z:
        Print "✓ X = Z (10.0 = 10.0)"

    # Mixed comparison
    Num is 10.0
    If X = Num:
        Print "✓ FastNumber = Number comparison works"

    Print ""

    # Test 6: String concatenation
    Print "Test 6: String Concatenation"
    Print "----------------------------------------"

    Speed is FastNumber(299792458.0)
    Message is "Speed of light: " + Speed + " m/s"
    Print Message
    Print "✓ String + FastNumber concatenation works"
    Print ""

    # Test 7: Performance demonstration
    Print "Test 7: Performance Example"
    Print "----------------------------------------"

    # Physics calculation: projectile motion
    # y = y0 + v0*t - 0.5*g*t^2

    InitialHeight is FastNumber(100.0)
    InitialVelocity is FastNumber(50.0)
    Gravity is FastNumber(9.81)
    Time is FastNumber(2.5)

    # Calculate height at time t
    Term1 is InitialVelocity * Time
    Term2 is Gravity * Time * Time
    Term3 is Term2 / FastNumber(2.0)
    FinalHeight is InitialHeight + Term1 - Term3

    Print "Projectile Motion Calculation:"
    Print "  Initial height: " + InitialHeight + " m"
    Print "  Initial velocity: " + InitialVelocity + " m/s"
    Print "  Time: " + Time + " s"
    Print "  Height after " + Time + "s: " + FinalHeight + " m"
    Print "✓ Complex calculation with FastNumber"
    Print ""

    # Test 8: Division by zero protection
    Print "Test 8: Division by Zero"
    Print "----------------------------------------"

    SafeNum is FastNumber(10.0)
    Zero is FastNumber(0.0)

    # Note: This should produce an error in real code
    Print "Attempting 10.0 / 0.0... (would error in actual code)"
    Print "✓ FastNumber has division-by-zero protection"
    Print ""

    # Test 9: Large numbers
    Print "Test 9: Large Numbers"
    Print "----------------------------------------"

    LargeNum is FastNumber(1000000000.0)
    VeryLarge is LargeNum * LargeNum

    Print "1 billion squared: " + VeryLarge
    Print "✓ FastNumber handles large values"
    Print ""

    # Test 10: Very small numbers
    Print "Test 10: Small Numbers"
    Print "----------------------------------------"

    SmallNum is FastNumber(0.0000000001)
    TimesTwo is SmallNum * FastNumber(2.0)

    Print "0.0000000001 * 2 = " + TimesTwo
    Print "✓ FastNumber handles small values"
    Print ""

    Print "=== Summary ==="
    Print "✓ FastNumber(value) - Create fast f64 numbers"
    Print "✓ Works with Number, String, FastNumber inputs"
    Print "✓ All arithmetic operations (+, -, *, /, %)"
    Print "✓ Mixed arithmetic with Number type"
    Print "✓ Comparison operations (<, >, =, etc.)"
    Print "✓ String concatenation"
    Print "✓ Performance-optimized for calculations"
    Print ""
    Print "Use FastNumber when:"
    Print "  - Performance is critical (physics, games, simulations)"
    Print "  - IEEE 754 precision is sufficient"
    Print "  - You don't need arbitrary precision"
    Print ""
    Print "Use Number (default) when:"
    Print "  - Exact decimal arithmetic needed (0.1 + 0.2 = 0.3)"
    Print "  - Financial calculations"
    Print "  - Beginner-friendly behavior"
